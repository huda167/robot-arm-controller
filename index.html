<!DOCTYPE html>
<html>
<head>
    <title>Robot Arm Control Panel</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .slider-container { margin: 10px 0; }
        .slider-label { display: inline-block; width: 70px; }
        .slider { width: 200px; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; text-align: center; }
    </style>
</head>
<body>

<h2>Robot Arm Control Panel</h2>

<div id="sliders">
    <div class="slider-container">
        <span class="slider-label">Motor 1:</span>
        <input type="range" min="0" max="180" value="90" class="slider" id="m1" oninput="updateValue(1)">
        <span id="val1">90</span>
    </div>
    <div class="slider-container">
        <span class="slider-label">Motor 2:</span>
        <input type="range" min="0" max="180" value="90" class="slider" id="m2" oninput="updateValue(2)">
        <span id="val2">90</span>
    </div>
    <div class="slider-container">
        <span class="slider-label">Motor 3:</span>
        <input type="range" min="0" max="180" value="90" class="slider" id="m3" oninput="updateValue(3)">
        <span id="val3">90</span>
    </div>
    <div class="slider-container">
        <span class="slider-label">Motor 4:</span>
        <input type="range" min="0" max="180" value="90" class="slider" id="m4" oninput="updateValue(4)">
        <span id="val4">90</span>
    </div>
    <div class="slider-container">
        <span class="slider-label">Motor 5:</span>
        <input type="range" min="0" max="180" value="90" class="slider" id="m5" oninput="updateValue(5)">
        <span id="val5">90</span>
    </div>
    <div class="slider-container">
        <span class="slider-label">Motor 6:</span>
        <input type="range" min="0" max="180" value="90" class="slider" id="m6" oninput="updateValue(6)">
        <span id="val6">90</span>
    </div>
</div>

<button onclick="resetSliders()">Reset</button>
<button onclick="savePose()">Save Pose</button>
<button onclick="runPose()">Run</button>

<h3>Saved Poses</h3>
<table id="posesTable">
    <thead>
        <tr>
            <th>#</th>
            <th>Motor 1</th><th>Motor 2</th><th>Motor 3</th><th>Motor 4</th><th>Motor 5</th><th>Motor 6</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody id="poseBody">
    </tbody>
</table>

<script>
function updateValue(num) {
    document.getElementById('val' + num).innerText = document.getElementById('m' + num).value;
}

function resetSliders() {
    for (let i = 1; i <= 6; i++) {
        document.getElementById('m' + i).value = 90;
        updateValue(i);
    }
}

function savePose() {
    let values = [];
    for (let i = 1; i <= 6; i++) {
        values.push(document.getElementById('m' + i).value);
    }
    fetch('save_pose.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ motors: values })
    }).then(res => res.text()).then(() => {
        loadPoses();
    });
}

function runPose() {
    fetch('get_run_pose.php')
        .then(res => res.text())
        .then(data => {
            alert("Current pose: " + data);
        });
}

function loadPoses() {
    fetch('load_poses.php')
        .then(res => res.json())
        .then(data => {
            let tbody = document.getElementById('poseBody');
            tbody.innerHTML = "";
            data.forEach((pose, index) => {
                tbody.innerHTML += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${pose.motor1}</td>
                    <td>${pose.motor2}</td>
                    <td>${pose.motor3}</td>
                    <td>${pose.motor4}</td>
                    <td>${pose.motor5}</td>
                    <td>${pose.motor6}</td>
                    <td>
                        <button onclick="loadPose(${pose.id})">Load</button>
                        <button onclick="removePose(${pose.id})">Remove</button>
                    </td>
                </tr>`;
            });
        });
}

function loadPose(id) {
    fetch('load_pose.php?id=' + id)
        .then(res => res.json())
        .then(data => {
            for (let i = 1; i <= 6; i++) {
                document.getElementById('m' + i).value = data["motor" + i];
                updateValue(i);
            }
        });
}

function removePose(id) {
    fetch('remove_pose.php?id=' + id)
        .then(() => loadPoses());
}

loadPoses();
</script>

</body>
</html>